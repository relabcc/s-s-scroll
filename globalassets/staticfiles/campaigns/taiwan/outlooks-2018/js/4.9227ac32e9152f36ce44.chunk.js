webpackJsonp([4],{"./app/components/NativePlayer/index.js":function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("./node_modules/react/react.js"),l=n.n(s),c=n("./node_modules/prop-types/index.js"),p=(n.n(c),n("./node_modules/styled-components/dist/styled-components.es.js")),u=n("./node_modules/rebass/dist/index.js"),f=(n.n(u),n("./node_modules/lodash/isArray.js")),d=n.n(f),y=n("./node_modules/d3-timer/index.js"),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&i)for(var s in i)void 0===n[s]&&(n[s]=i[s]);else n||(n=i||{});if(1===a)n.children=o;else if(a>1){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+3];n.children=l}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),v=p.default.video.withConfig({displayName:"NativePlayer__Player"})(["position: absolute;width: 100%;height: 100%;top: 0;left: 0;"]),g=function(e,t){return b("source",{src:e},t)},j=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onPlay=function(){if(!e.isPlaying){e.isPlaying=!0;var t=e.props,n=t.onFrameCallback,r=t.fps;n&&(e.timer=Object(y.a)(e.onFrame,1e3/r))}},e.onStop=function(){var t=e.props.onStop;e.timer&&e.timer.stop(),t&&t(),e.isPlaying=!1},e.onFrame=function(){(0,e.props.onFrameCallback)(e.currentFrame,e.toolBox),e.currentFrame+=1},e.toolBox={setCurrentTime:function(t){e.video.currentTime=t/e.props.fps,e.currentFrame=t}},e.currentFrame=0,e}return a(t,e),m(t,[{key:"componentDidMount",value:function(){this.video.addEventListener("play",this.onPlay),this.video.addEventListener("ended",this.onStop)}},{key:"componentWillUnmount",value:function(){this.video.removeEventListener("play",this.onPlay),this.video.removeEventListener("ended",this.onStop),this.timer&&this.timer.stop()}},{key:"render",value:function(){var e=this,t=this.props,n=t.ratio,o=t.src,i=t.loop,a=t.autoPlay,s=t.muted,c=t.controls,p=t.playsInline,f=t.innerRef,y=r(t,["ratio","src","loop","autoPlay","muted","controls","playsInline","innerRef"]);return l.a.createElement(u.Relative,h({pb:100*n+"%"},y),b(v,{innerRef:function(t){f&&f(t),e.video=t},loop:i,autoPlay:a,muted:s,controls:c,playsInline:p},void 0,d()(o)?o.map(g):g(o)))}}]),t}(s.PureComponent);j.defaultProps={ratio:9/16,muted:!0,controls:!1,playsInline:!0,fps:29.97},t.a=j},"./app/containers/HomePage/IntroBg/fly-lg.mp4":function(e,t,n){e.exports=n.p+"globalassets/staticfiles/campaigns/taiwan/outlooks-2018/img/bf1c2b5ab0c83b50fe0ccf3475650bfd.mp4"},"./app/containers/HomePage/IntroBg/fly-lg.webm":function(e,t,n){e.exports=n.p+"globalassets/staticfiles/campaigns/taiwan/outlooks-2018/img/94cbab298ee3ed4f6c2e05f3d2b989d5.webm"},"./app/containers/HomePage/IntroBg/index.js":function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n("./node_modules/react/react.js"),f=n.n(u),d=n("./node_modules/redux/es/index.js"),y=(n("./node_modules/prop-types/index.js"),n("./node_modules/styled-components/dist/styled-components.es.js")),h=n("./node_modules/react-measure/lib/react-measure.js"),m=n.n(h),b=n("./app/components/NativePlayer/index.js"),v=n("./app/components/GridSystem/Container/index.js"),g=n("./app/components/VerticalCenter/index.js"),j=n("./app/decorators/WithResizeListener/index.js"),O=n("./app/decorators/WithScrollListener/index.js"),w=n("./app/utils/appScrollHandler.js"),P=n("./node_modules/d3-timer/index.js"),_=n("./node_modules/rebass/dist/index.js"),S=n("./node_modules/animate-css-styled-components/lib/index.js"),x=n("./app/components/Text/index.js"),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&i)for(var s in i)void 0===n[s]&&(n[s]=i[s]);else n||(n=i||{});if(1===a)n.children=o;else if(a>1){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+3];n.children=l}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),F=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  top: 0;\n  left: 0;\n  right: 0;\n  transform: translateY(-50%);\n"],["\n  top: 0;\n  left: 0;\n  right: 0;\n  transform: translateY(-50%);\n"]),R=_.Absolute.extend(F),T=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={prev:null},a=n,i(r,a)}return a(t,e),C(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.children!==this.props.children&&(this.setState({prev:this.props.children}),Object(P.b)(function(){t.setState({prev:null})},500))}},{key:"render",value:function(){var e=this.state.prev,t=this.props,n=t.children,o=r(t,["children"]);return k(g.a,{},void 0,e&&k(R,{is:S.FadeOut},void 0,f.a.createElement(x.a,E({color:"white",center:!0,lineHeight:1},o),e)),k(R,{is:S.FadeIn},JSON.stringify(n),f.a.createElement(x.a,E({color:"white",center:!0,lineHeight:1},o),n)))}}]),t}(u.PureComponent),I=T,L=n("./app/containers/HomePage/IntroBg/fly-lg.mp4"),H=n.n(L),B=n("./app/containers/HomePage/IntroBg/fly-lg.webm"),W=n.n(B),A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,r,o){var i=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&i)for(var s in i)void 0===n[s]&&(n[s]=i[s]);else n||(n=i||{});if(1===a)n.children=o;else if(a>1){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+3];n.children=l}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}}(),$=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),z=y.default.div.withConfig({displayName:"IntroBg__Relative"})(["position: relative;background: ",";height: ","px;overflow: hidden;"],function(e){var t=e.bg;return e.theme.colors[t]||t},function(e){return e.height}),M={before:["未來 已來","投資思維 與時俱進","智能科技 顛覆生活","掌握投資未來"],after:"有請專業"},D=M.before.length,J=function(e){function t(){var e,n,r,o;l(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.state={msg:0,after:!1,scrolled:!1,transitionStart:!1,transitionEnd:!1,containerWidth:-1,hide:!1},r.handleOnScroll=function(e){r.state.scrolled||(e.preventDefault(),r.setState({scrolled:!0}))},r.handleLoop1End=function(){var e=r.state.msg,t=e>=D-2,n=e+1;r.setState({transitionStart:t,msg:n})},r.handleTransitionEnd=function(){r.props.onTransitionFinished(),r.setState({transitionEnd:!0}),r.disableScrollListener()},r.handleFrame=function(e,t){var n=r.state.transitionStart;n||35!==e?n&&65===e&&r.handleTransitionEnd():(t.setCurrentTime(0),r.handleLoop1End())},r.disableScrollListener=function(){r.cancled=!0,r.props.cancelScrollListener("scroll"),Object(w.b)()},o=n,c(r,o)}return p(t,e),$(t,[{key:"componentWillMount",value:function(){window.scroll(0,0),Object(w.a)(),this.xs=this.props.isXs,this.md=!this.props.isXs&&this.props.windowWidth<1360,this.loop1Count=0,this.loopState=0}},{key:"render",value:function(){var e=this,t=this.state,n=t.transitionStart,r=t.transitionEnd,o=t.msg,i=this.props,a=i.wrapperHeight,l=s(i,["wrapperHeight"]),c=function(){return n?n&&!r?M.after:"":M.before[o]}();return f.a.createElement(z,A({},l,{innerRef:function(t){e.container=t},height:a}),N(g.a,{},void 0,N(b.a,{ratio:1,src:[W.a,H.a],autoPlay:!0,fps:15,onFrameCallback:this.handleFrame})),N(I,{f:["1.25em","1.75em","2em"],bold:!0},void 0,c),N(v.a,{},void 0,N(m.a,{bounds:!0,onResize:function(t){e.setState({containerWidth:t.bounds.width})}},void 0,function(e){var t=e.measureRef;return f.a.createElement("div",{ref:t})})))}}]),t}(f.a.PureComponent);t.default=Object(d.c)(j.a,O.a)(J)}});